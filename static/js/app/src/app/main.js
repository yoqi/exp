/*! power by kodexplorer ver3.37(2017-01-09) [build 1483959466678] */
define("app/src/app/main",["lib/jquery-lib","lib/util","lib/artDialog/jquery-artDialog","../../common/core","./page"],function(e){e("lib/jquery-lib"),e("lib/util"),e("lib/artDialog/jquery-artDialog"),core=e("../../common/core"),App=e("./page"),core.init(),App.init()}),define("app/common/core",[],function(require,exports){search_box_tpl=require("./tpl/search.html"),search_list_tpl=require("./tpl/search_list.html"),upload_tpl=require("./tpl/upload.html");var search=require("./core.search"),tools=require("./core.tools"),upload=require("./core.upload"),api=require("./core.api"),playSound=require("./core.playSound");pathHashEncode=function(e){return hashEncode(e)},pathHashDecode=function(e){return hashDecode(e)};var initFirst=function(){if(window.require=require,template.config("escape",!1),template.config("compress",!0),template.helper("core",core),template.helper("window",window),"undefined"!=typeof G&&(1!=G.is_root&&$(".menu_system_setting").remove(),G.is_root||1==AUTH["system_member:get"]||1==AUTH["system_group:get"]||$(".menu_system_group").remove(),G.user_config&&"0"==G.user_config.animate_open&&($.dialog.defaults.animate=!1),resetHost()),$("html").bind("click",function(e){if(0==$(e.target).parents(".context-menu-list").length)try{rightMenu.hidden()}catch(e){}}),$.dialog.defaults.animate&&loadRipple(["a","button",".context-menu-item","#picker",".menuShareButton",".menuRecycleButton",".section .list"],[".disabled",".disable",".ztree",".disable-ripple"]),$("a,img").attr("draggable","false"),$.ajaxSetup({headers:{"X-CSRF-TOKEN":Cookie.get("CSRF-TOKEN")}}),$(".common_footer [forceWap]").click(function(){var e=$(this).attr("forceWap");Cookie.set("forceWap",e),window.location.reload()}),core.setSkinDiy(),core.tools.init(),playserSupport(),"array"==$.type(window.kodReady))for(var e=0;window.kodReady.length>e;e++)window.kodReady[e]();titleTips()},resetHost=function(){var e=window.location.port?":"+window.location.port:"";G.web_host=window.location.protocol+"//"+window.location.hostname+e+"/",G.app_host=rtrim(G.web_host,"/")+window.location.pathname.replace("index.php","")},playserSupport=function(){var e={ie:{music:["mp3","m4a","aac"],movie:["mp4","m4v","flv","mov","f4v"]},chrome:{music:["mp3","wav","m4a","aac","oga","ogg","webma"],movie:["mp4","m4v","flv","mov","f4v","ogv","webm","webmv"]}},a=!!window.ActiveXObject||"ActiveXObject"in window,i="chrome";a&&(i="ie"),core.filetypes.music=e[i].music,core.filetypes.movie=e[i].movie},titleTips=function(){isWap()||require.async(["lib/poshytip/jquery.poshytip.js","lib/poshytip/skin.css"],function(){var e=$("[title]");e.poshytip({className:"ptips-skin",liveEvents:!0,slide:!1,alignTo:"cursor",alignX:"right",alignY:"bottom",showAniDuration:150,hideAniDuration:200,offsetY:10,offsetX:20,showTimeout:function(){var e=700;return $(this).attr("title-timeout")&&(e=parseInt($(this).attr("title-timeout"))),e},content:function(){var e=$(this).data("title.poshytip");if($(this).attr("title-data")){var a=$($(this).attr("title-data"));e=a.is("input")||a.is("textarea")?a.val():a.html()}return e=e?e:"",e.replace(/\n/g,"<br/>")}}),$("body").bind("mousedown click",function(){$(e).poshytip("hide"),$(".ptips-skin").remove()}),$("input,textarea").live("focus",function(){$(e).poshytip("hide"),$(".ptips-skin").remove()})})};return{search:search,init:initFirst,serverDwonload:upload.serverDwonload,upload:upload.upload,uploadInit:upload.init,playSound:playSound.playSound,playSoundFile:playSound.playSoundFile,tools:tools,api:api,filetypes:{image:["jpg","jpeg","png","bmp","gif","ico","svg","cur","webp"],music:["mp3","wav","m4a","aac","oga","ogg","webma"],movie:["mp4","m4v","flv","mov","f4v","ogv","webm","webmv"],doc:["doc","docx","docm","xls","xlsx","xlsb","xlsm","ppt","pptx","pptm"],text:["txt","textile","oexe","inc","csv","log","asc","tsv","lnk","url","webloc","meta","localized","xib","xsd","storyboard","plist","csproj","pch","pbxproj","local","xcscheme","manifest","vbproj","strings","jshintrc","sublime-project","readme","changes","changelog","version","license","changelog","abap","abc","as","asp","aspx","ada","adb","htaccess","htgroups","htgroups","htpasswd","asciidoc","adoc","asm","a","ahk","bat","cmd","cpp","c","cc","cxx","h","hh","hpp","ino","c9search_results","cirru","cr","clj","cljs","cbl","cob","coffee","cf","cson","cakefile","cfm","cs","css","curly","d","di","dart","diff","patch","dockerfile","dot","dummy","dummy","e","ge","ejs","ex","exs","elm","erl","hrl","frt","fs","ldr","ftl","gcode","feature",".gitignore","glsl","frag","vert","gbs","go","groovy","haml","hbs","handlebars","tpl","mustache","hs","hx","html","hta","htm","xhtml","eex","html.eex","erb","rhtml","html.erb","ini","inf","conf","cfg","prefs","io","jack","jade","java","ji","jl","jq","js","jsm","json","jsp","jsx","latex","ltx","bib","lean","hlean","less","liquid","lisp","ls","logic","lql","lsl","lua","lp","lucene","Makefile","makemakefile","gnumakefile","makefile","ocamlmakefile","make","md","markdown","mask","matlab","mz","mel","mc","mush","mysql","nix","nsi","nsh","m","mm","ml","mli","pas","p","pl","pm","pgsql","php","phtml","shtml","php3","php4","php5","phps","phpt","aw","ctp","module","ps1","praat","praatscript","psc","proc","plg","prolog","properties","proto","py","r","cshtml","rd","rhtml","rst","rb","ru","gemspec","rake","guardfile","rakefile","gemfile","rs","sass","scad","scala","scm","sm","rkt","oak","scheme","scss","sh","bash","bashrc","sjs","smarty","tpl","snippets","soy","space","sql","sqlserver","styl","stylus","svg","swift","tcl","tex","toml","twig","swig","ts","typescript","str","vala","vbs","vb","vm","v","vh","sv","svh","vhd","vhdl","wlk","wpgm","wtest","xml","rdf","rss","wsdl","xslt","atom","mathml","mml","xul","xbl","xaml","xq","yaml","yml","vcproj","vcxproj","filters","cer","reg","config","pem","srt","ass"],bindary:["bin","hex","zip","pdf","swf","gzip","rar","arj","tar","gz","cab","tbz","tbz2","lzh","uue","bz2","ace","exe","so","dll","chm","rtf","odp","odt","pages","class","psd","ttf","fla","7z","dmg","iso","dat","ipa","lib","a","apk","so","o"]},fileOpenMode:{ini:["inc","inf","strings"],xml:["xib","xsd","storyboard","plist","csproj","pch","pbxproj","xcscheme","config","vcproj","vcxproj","filters","webloc"],json:["oexe","jshintrc","sublime-project"],markdown:["readme","changes","version","license","changelog"]},getPathIcon:function(e,a){if(a=void 0==a?"":a,"string"==$.type(e)){var i=trim(trim(e),"/");if(e={},"{"!=i.substring(0,1)||i.split("/").length>1)return{icon:"",name:""};e.path_type=i.match(/\{.*\}/),e.id=i.split(":")[1]}var t={};t[G.KOD_USER_SHARE]={icon:"userSelf",name:LNG.my_share},t[G.KOD_GROUP_PATH]={icon:"groupSelfOwner"},t[G.KOD_GROUP_SHARE]={icon:"groupGuest"},t[G.KOD_USER_RECYCLE]={icon:"recycle",name:LNG.recycle},t[G.KOD_USER_FAV]={icon:"treeFav",name:LNG.fav},t[G.KOD_GROUP_ROOT_SELF]={icon:"groupSelfRoot",name:LNG.my_kod_group},t[G.KOD_GROUP_ROOT_ALL]={icon:"groupRoot",name:LNG.kod_group};var n=t[e.path_type];return e.path_type==G.KOD_USER_SHARE&&G.user_id!=e.id?n={icon:"user",name:a}:e.path_type==G.KOD_GROUP_PATH&&"owner"==e.role&&(n={icon:"groupSelfOwner"}),void 0==n&&(n={icon:"",name:""}),void 0==n.name&&(n.name=a),n},isSystemPath:function(e){var e=trim(trim(e),"/");if(void 0==e||"{"!=e.substring(0,1)||e.split("/").length>1)return!1;var a=e.match(/\{.*\}/),i=[G.KOD_USER_SHARE,G.KOD_GROUP_SHARE,G.KOD_USER_RECYCLE,G.KOD_USER_FAV,G.KOD_GROUP_ROOT_SELF,G.KOD_GROUP_ROOT_ALL],t=!1;return $.inArray(a[0],i)>=0&&(t=!0),t},contextmenu:function(e){try{rightMenu.hidden()}catch(a){}var a=e||window.event;return a?a&&$(a.target).is("textarea")||$(a.target).is("input")||$(a.target).is("p")||$(a.target).is("pre")||0!=$(a.target).parents(".can_right_menu").length||0!=$(a.target).parents(".topbar").length||0!=$(a.target).parents(".edit_body").length||0!=$(a.target).parents(".aui_state_focus").length?!0:!1:!0},pathThis:function(e){if(!e||"/"==e)return"";var a=rtrim(this.pathClear(e),"/"),i=a.lastIndexOf("/"),t=a.substr(i+1);if(0==t.search("fileProxy")){t=urlDecode(t.substr(t.search("&path=")));var n=t.split("/");t=n[n.length-1],""==t&&(t=n[n.length-2])}return t},pathClear:function(e){if(!e)return"";var a=e.replace(/\\/g,"/");return a=a.replace(/\/+/g,"/"),a=a.replace(/\.+\//g,"/")},pathFather:function(e){var a=rtrim(this.pathClear(e),"/"),i=a.lastIndexOf("/");return a.substr(0,i+1)},pathExt:function(e){var a=trim(e,"/");return-1!=a.lastIndexOf("/")&&(a=a.substr(a.lastIndexOf("/")+1)),-1!=a.lastIndexOf(".")?a.substr(a.lastIndexOf(".")+1).toLowerCase():a.toLowerCase()},path2url:function(e,a){if("http"==e.substr(0,4))return e;void 0==a&&(a=!0);var i,t=this.pathClear(e);this.pathExt(t);var n=function(e){if(!e)return"";var a=urlEncode(e);return a=a.replace(/%2F/g,"/")};return G.is_root&&a&&t.substring(0,G.web_root.length)==G.web_root?i=G.web_host+n(t.replace(G.web_root,"")):(i=G.app_host+"index.php?explorer/fileProxy&path="+urlEncode(t),G.share_page!==void 0&&(i=G.app_host+"index.php?share/fileProxy&user="+G.user+"&sid="+G.sid+"&path="+urlEncode(t))),i},pathReadable:function(e){if("object"!=typeof G.json_data)return!0;var a;a=G.json_data.filelist;for(var i=0;a.length>i;i++)if(a[i].path==e)return void 0==a[i].is_readable||1==a[i].is_readable?!0:!1;a=G.json_data.folderlist;for(var i=0;a.length>i;i++)if(a[i].path==e)return void 0==a[i].is_readable||1==a[i].is_readable?!0:!1;return!0},authCheck:function(e,a){return G.is_root?!0:AUTH.hasOwnProperty(e)?AUTH[e]?!0:(void 0==a&&(a=LNG.no_permission),Tips.tips(a,!1),!1):!0},ajaxError:function(e){var a=e.responseText,i='<div class="ajaxError">'+a+"</div>",t=$.dialog.list.ajaxErrorDialog;return Tips.close(LNG.system_error,!1),"<!--user login-->"==a.substr(0,17)?(setTimeout(function(){window.location.reload()},500),void 0):(t?t.content(i):$.dialog({id:"ajaxErrorDialog",padding:0,width:"60%",height:"50%",fixed:!0,resize:!0,ico:core.icon("error"),title:"ajax error",content:i}),void 0)},fileGet:function(e,a){var i="./index.php?editor/fileGet&filename="+urlEncode(e);G.share_page!==void 0&&(i="./index.php?share/fileGet&user="+G.user+"&sid="+G.sid+"&filename="+urlEncode(e)),$.ajax({url:i,dataType:"json",beforeSend:function(){Tips.loading(LNG.loading)},error:core.ajaxError,success:function(e){Tips.close(LNG.success),"function"==typeof a&&a(e.data.content)}})},fileInfo:function(e,a){var i="index.php?explorer/pathInfo";G.share_page!==void 0&&(i="index.php?share/pathInfo&user="+G.user+"&sid="+G.sid),$.ajax({url:i,type:"POST",dataType:"json",data:e,error:core.ajaxError,success:function(e){"function"==typeof a&&a(e)}})},fileLink:function(e,a){var i='list=[{"type":"file","path":"'+urlEncode(e)+'"}]';this.fileInfo(i,function(e){var i=e.code?e.data.download_path:!1;return i?("function"==typeof a&&a(i),void 0):(Tips.tips(LNG.no_permission_action+"==>"+LNG.group_role_pathinfo,!1),void 0)})},setting:function(e){void 0==e&&(e=G.is_root?"system":"user"),ShareData.frameTop("Opensetting_mode")?ShareData.frameTop("Opensetting_mode",function(a){a.Setting.setGoto(e),$.dialog.list.setting_mode.display(!0)}):$.dialog.open("./index.php?setting#"+e,{id:"setting_mode",fixed:!0,ico:core.icon("setting"),resize:!0,title:LNG.setting,width:950,height:600})},copyright:function(){var e=require("./tpl/copyright.html"),a=template.compile(e),i=ShareData.frameTop();i.art.dialog({id:"copyright_dialog",bottom:0,right:0,simple:!0,resize:!1,title:LNG.about+" kod",width:425,padding:"0",fixed:!0,content:a({LNG:LNG,G:G})}),i.$(".copyright_dialog").addClass("animated-700 zoomIn")},qrcode:function(e,a){"./"==e.substr(0,2)&&(e=G.app_host+e.substr(2));var i="./index.php?user/qrcode&url="+quoteHtml(urlEncode(e)),t="<a href='"+quoteHtml(e)+"' s='"+e+"' target='_blank'><img src='"+i+"' style='border:1px solid #eee;'/></a>";$.dialog({follow:a,fixed:!0,resize:!1,title:LNG.qrcode,padding:30,content:t})},appStore:function(){var e=ShareData.frameTop();e.$.dialog.open("./index.php?app",{id:"app_store",fixed:!0,ico:core.icon("appStore"),resize:!0,title:LNG.app_store,width:900,height:550})},openWindow:function(e){var a=ShareData.frameTop(),i=a.$.dialog.open(e,{fixed:!0,resize:!0,width:"80%",height:"75%"});return i},openDialog:function(e,a,i,t){if(e){void 0==t&&(t="openDialog"+UUID());var n="<iframe frameborder='0' name='Open"+t+"' src='"+htmlEncode(e)+"' style='width:100%;height:100%;border:0;'></iframe>",o=ShareData.frameTop(),s=o.$.dialog({id:t,fixed:!0,title:i,ico:a,width:"75%",height:"70%",padding:0,content:n,resize:!0});return s}},openApp:function(app){if("url"==app.type){var icon=app.icon;-1==app.icon.search(G.static_path)&&"http"!=app.icon.substring(0,4)&&(icon=G.static_path+"images/file_icon/icon_app/"+app.icon),"number"!=typeof app.width&&-1===app.width.search("%")&&(app.width=parseInt(app.width)),"number"!=typeof app.height&&-1===app.height.search("%")&&(app.height=parseInt(app.height)),app.width||(app.width="90%"),app.height||(app.height="70%");var dialog_info={resize:app.resize,fixed:!0,ico:core.iconSrc(icon),title:app.name.replace(".oexe",""),width:app.width,height:app.height,simple:app.simple,padding:0},top=ShareData.frameTop();"swf"==core.pathExt(app.content)?(dialog_info.content=core.createFlash(app.content),top.$.dialog(dialog_info)):top.$.dialog.open(app.content,dialog_info)}else{var exec=app.content;eval("{"+exec+"}")}},update:function(){setTimeout(function(){var e=base64Decode("Ly9zdGF0aWMua2FsY2FkZGxlLmNvbS91cGRhdGUvbWFpbi5qcw==")+"?a="+UUID();require.async(e,function(e){try{e.todo("check")}catch(a){}})},200)},openPath:function(e){"undefined"!=typeof Config&&"explorer"==Config.pageApp?ui.path.list(e,"tips"):core.explorer(e)},explorer:function(e,a){void 0==e&&(e=""),void 0==a&&(a=core.pathThis(e));var i="./index.php?/explorer&type=iframe&path="+e;G.share_page!==void 0&&(i="./index.php?share/folder&type=iframe&user="+G.user+"&sid="+G.sid+"&path="+e);var t=ShareData.frameTop(),n=t.$.dialog.open(i,{className:"dialogExplorer",resize:!0,fixed:!0,ico:core.icon("folder"),title:a,width:"80%",height:"75%"}),o=20*t.$(".dialogExplorer").length;n.DOM.wrap.css({left:"+="+o+"px",top:"+="+o+"px"})},explorerCode:function(e){void 0==e&&(e="");var a="index.php?/editor&project="+e;G.share_page!==void 0&&(a="./index.php?share/code_read&user="+G.user+"&sid="+G.sid+"&project="+e),window.open(a)},setSkinFinished:function(){var e=$(".setSkin_finished").attr("src");e&&($("#link_css_list").attr("href",e),$(".setSkin_finished").remove())},setSkin:function(e){LocalData.set("theme",e),G.user_config.theme=e;var a=G.static_path+"style/skin/"+e+".css";a!=$("#link_css_list").attr("href")&&$("body").append('<img src="'+a+'" onload="core.setSkinFinished();" onerror="core.setSkinFinished();" class="hidden setSkin_finished">'),this.setSkinDiy()},setSkinDiy:function(){if(G.user_config){var e=LocalData.get("theme"),a="kod_diy_style",i=LocalData.getConfig(a);"object"!=typeof i&&"object"==typeof G.user_config.theme_diy&&(i=G.user_config.theme_diy),"object"!=typeof i&&(i={bg_blur:1,bg_image:G.static_path+"images/wall_page/9.jpg",bg_type:"color",start_color:"#456",end_color:"#000",color_rotate:"200"},LocalData.setConfig(a,i)),G.user_config.theme_diy=i;var t="";if("diy"==e&&i){var n=require("./tpl/theme_diy.html"),o=template.compile(n);t=o(i)}$.setStyle(t,a)}},editorFull:function(){var e=$("iframe[name=OpenopenEditor]");e.toggleClass("frame_fullscreen")},language:function(e){Cookie.set("kod_user_language",e,8760),window.location.reload()},fullScreen:function(){"true"==$("body").attr("fullScreen")&&core.exitfullScreen(),$("body").attr("fullScreen","true");var e=ShareData.frameTop(),a=e.document.documentElement;a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullScreen&&a.webkitRequestFullScreen()},exitfullScreen:function(){$("body").attr("fullScreen","false"),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()},createFlash:function(e,a,i){var t=UUID();(i===void 0||""==i)&&(i=t);var n="";$.browser.msie&&9>parseInt($.browser.version)&&(n='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"');var o='<object type="application/x-shockwave-flash" class="'+t+'" '+n+' name="'+i+'" id="'+i+'" data="'+e+'" width="100%" height="100%" tabindex="-1" >'+'<param name="movie" value="'+e+'"/>'+'<param name="allowfullscreen" value="true" />'+'<param name="allowscriptaccess" value="always" />'+'<param name="allowScriptAccess" value="always" />'+'<param name="flashvars" value="'+a+'" />'+'<param name="wmode" value="transparent" />'+'</object><div class="aui_loading" id="'+t+'_loading"><span>loading..</span></div>';return setTimeout(function(){var e=$("."+t);if(1!=e.length){var a=ShareData.frameTop();e=a.$("."+t)}if(1==e.length)var i=0,n=e[0],o=setInterval(function(){try{i++,100==Math.floor(n.PercentLoaded())?(e.next(".aui_loading").remove(),clearInterval(o),o=null):i>100&&(e.next(".aui_loading").remove(),clearInterval(o),o=null)}catch(a){}},100)},50),o},userSpaceHtml:function(e){var a=e.split("/"),i=parseFloat(a[0]),t=1073741824*parseFloat(a[1]),n=core.fileSize(parseFloat(a[0])),o=core.fileSize(t),s=n+"/",r=100*i/t;return r>=100&&(r=100),0==t||isNaN(t)?(s+=LNG.space_tips_full,r="0%"):(s+=o,r+="%"),s="<div class='space_info_bar'><div class='space_process'><div class='space_process_use' style='width:"+r+"'></div></div>"+"<div class='space_info'>"+s+"</div>"+"</div>"},fileSize:function(e,a){if(void 0==e||""==e)return"";if(void 0==a&&(a=1),1024>=e)return parseInt(e)+"B";e=parseInt(e);var i={G:1073741824,M:1048576,K:1024,B:1};for(var t in i)if(e>=i[t])return(e/i[t]).toFixed(a)+t},uploadCheck:function(e,a){return a=void 0==a?!0:a,"share"==G.share_page?"1"==G.share_info.can_upload:(void 0==e&&(e="explorer:fileUpload"),!G.is_root&&AUTH.hasOwnProperty(e)&&1!=AUTH[e]?(a&&Tips.tips(LNG.no_permission,!1),!1):G.json_data&&!G.json_data.info.can_upload?(a&&Tips.tips(LNG.no_permission_write,!1),!1):core.isSystemPath(G.this_path)?(a&&Tips.tips(LNG.path_can_not_action,!1),!1):!0)}}}),define("app/common/tpl/search.html",[],"<div class='do_search'>\n	<div class='search_header'>\n		<div class='s_br'>\n			<input type='text' id='search_value'/><button class=\"btn btn-default btn-sm btn-right\"><i class=\"font-icon icon-search\"></i></button>\n			<div style='float:right'>{{LNG.path}}:<input type='text' id='search_path' title=\"\" title-data=\"#search_path\" title-timeout=\"100\"/></div>\n		</div>\n		<div class='s_br'>\n			<input type='checkbox' id='search_is_content' class=\"kui-checkbox size-small\"/>\n			<label for='search_is_content'>{{LNG.search_content}}</label>\n			<input type='checkbox' id='search_is_case' class=\"kui-checkbox size-small\"/>\n			<label for='search_is_case'>{{LNG.search_uplow}}</label>\n			<div style='float:right'>\n				{{LNG.file_type}}:<input type='text' id='search_ext' title='{{LNG.search_ext_tips}}' title-timeout=\"100\"/>\n			</div>\n		</div>\n	</div>\n	<div class=\"search_desc\"></div>\n	<div class='search_result'>\n		<ul class=\"file-items\"></ul>\n	</div>\n</div>\n\n"),define("app/common/tpl/search_list.html",[],'<!-- 文件夹列表 -->\n{{each data.folderlist as v i}}\n	 <li class="file-item open" data-path="{{v.path | window.pathHashEncode}}" data-type="folder" data-ext="folder">\n		<div class="file-info">\n			<span class="switch"><i class="font-icon icon-file-alt"></i></span>\n			<span class="file-icon">{{\'folder\' |core.icon}}</span>\n			<span class="title" title="{{LNG.goto}} {{v.path | window.htmlEncode}}">{{v.name | searchResultPrase}}</span>\n			<span class="goto" title="{{LNG.open_the_path}}"><i class="icon-folder-open-alt"></i></span>\n		</div>\n	</li>\n{{/each}}\n\n<!-- 文件列表 -->\n{{each data.filelist as v i}}\n	{{if v.search_info}}\n	<li class="file-item open" data-path="{{v.path | window.pathHashEncode}}" data-type="file" data-ext="{{v.ext}}">\n		<div class="file-info file-result">\n			<span class="switch"><i class="font-icon icon-caret-right"></i></span>\n			<span class="file-icon">{{v.ext |core.icon}}</span>\n			<span class="title" title="{{LNG.goto}} {{v.path | window.htmlEncode}}">{{v.name | window.htmlEncode}}</span>\n			<span class="result-num">{{v.search_info.length}}</span>\n			<span class="goto" title="{{LNG.open_the_path}}"><i class="icon-folder-open-alt"></i></span>\n		</div>\n		<ul class="result-item">\n			{{each v.search_info as value index}}\n			<li class="result-info">\n				<span class="line" data-line="{{value.line}}">{{value.line}}:</span>\n				<span class="search-info">{{#value.str | searchResultPrase}}</span>\n			</li>\n			{{/each}}\n		</ul>\n	</li>\n	{{else}}\n	<li class="file-item open" data-path="{{v.path | window.pathHashEncode}}" data-type="file-name" data-ext="{{v.ext}}">\n		<div class="file-info">\n			<span class="switch"><i class="font-icon icon-file-alt"></i></span>\n			<span class="file-icon">{{v.ext |core.icon}}</span>\n			<span class="title" title="{{LNG.goto}} {{v.path | window.htmlEncode}}">{{v.name | searchResultPrase}}</span>\n			<span class="goto" title="{{LNG.open_the_path}}"><i class="icon-folder-open-alt"></i></span>\n		</div>\n	</li>\n	{{/if}}\n{{/each}}\n\n'),define("app/common/tpl/upload.html",[],'<div class=\'file_upload\'>\n	<div class=\'top_nav\'>\n	   <a href=\'javascript:void(0);\' class=\'menu this tab_upload\'>{{LNG.upload_local}}</a>\n	   <a href=\'javascript:void(0);\' class=\'menu tab_download\'>{{LNG.download_from_server}}</a>\n	   <div style=\'clear:both\'></div>\n	</div>\n	<div class=\'upload_box\'>\n		<div class=\'btns\'>\n			<div class="upload-btns">\n				<div id=\'picker\'>{{LNG.upload_select}}</div>\n				\n				<div id=\'picker_folder\' class="hidden">select Folder</div>\n				<div class="upload_cert_box hidden">\n					<button title="More" type="button" class="upload_cert dropdown-toggle" data-toggle="dropdown">\n						<span class="caret"></span>\n					</button>\n					<ul class="dropdown-menu pull-left animated menuShow">\n						<li><a href="javascript:void(0);" class="drag_upload_folder" draggable="false">{{LNG.folder}}</a></li>\n					</ul>\n				</div>\n			</div>\n			\n			<div class="upload_box_tips">\n				<a href="javascript:void(0);" class="upload_box_clear">{{LNG.upload_clear}}</a> \n			</div>\n			<div style=\'clear:both\'></div>\n		</div>\n		<div class=\'uploader-content\'>\n			<div class=\'uploader-list\'></div>\n		</div>\n	</div>\n	<div class=\'download_box hidden\'>\n		<div class=\'list\'>{{LNG.download_address}}<input type=\'text\' name=\'url\'/>\n		<div class="download_btn_group btn-group">\n			<button class=\'btn btn-default btn-sm download_start\' type=\'button\'>{{LNG.download}}</button>\n			<button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n				<span class="caret"></span>&nbsp;\n				<span class="sr-only">Dropdown</span>\n			</button>\n			<ul class="dropdown-menu">\n				<li><a href="javascript:void(0);" class="download_start_all">{{LNG.upload_add_more}}</a></li>\n			</ul>\n		</div>\n\n		</div>\n		<div style=\'clear:both\'></div>\n		<div id=\'downloader\'>\n			<div class=\'download_list\'></div>\n		</div>\n	</div>\n</div>\n'),define("app/common/core.search",[],function(){return function(e,a){var i,t,n=function(){var n=trim(core.pathClear(a),"/");if(0==n.indexOf(G.KOD_USER_SHARE)&&-1==n.indexOf("/")||n==G.KOD_USER_FAV||n==G.KOD_GROUP_ROOT_ALL)return Tips.tips(LNG.path_cannot_search,!1),void 0;template.helper("searchResultPrase",r);var o=template.compile(search_box_tpl);0==$(".dialog_do_search").length?(i=$.dialog({id:"dialog_do_search",padding:0,fixed:!0,ico:core.icon("search"),resize:!0,title:LNG.search,width:440,height:480,content:o({LNG:LNG})}),t=c(),t.path=a,""!=e&&(t.search=e),$("#search_path").val(t.path),$("#search_value").val(t.search),l()):($.dialog.list.dialog_do_search.display(!0),e&&$("#search_value").val(e),$("#search_path").val(a),s())},o=function(){return t={search:$("#search_value").val(),path:$("#search_path").val(),is_content:Number($("#search_is_content").is(":checked")),is_case:Number($("#search_is_case").is(":checked")),ext:$("#search_ext").val()}},s=function(){o(),p(t)},r=function(e){var a=htmlEncode($("#search_value").val());if(e=htmlEncode(e),t.is_case)e=e.replace(a,'<span class="keyword">'+a+"</span>");else{var i=e.toLowerCase().indexOf(a.toLowerCase());e=e.substr(0,i)+'<span class="keyword">'+e.substr(i,a.length)+"</span>"+e.substr(i+a.length)}return e},l=function(){$("#search_value").die("keyup").live("keyup",function(){"editor"==!Config.pageApp&&ui.path.setSearchByStr($(this).val())}),$("#search_value,#search_ext,#search_path").keyEnter(s),$(".search_header .btn").die("click").live("click",s),$(".search_result .file-item .file-info").die("click").live("click",function(e){var a=$(this).parent();return a.toggleClass("open"),a.find(".result-item").slideToggle(200),stopPP(e),!1}),$(".search_result .file-item .file-info .goto").die("click").live("click",function(e){var a=$(this).parent().parent(),i=pathHashDecode(a.attr("data-path")),t=core.pathFather(i);return core.openPath(t),setTimeout(function(){Config&&"explorer"==Config.pageApp&&ui.path.setSelectByFilename(i)},200),stopPP(e),!1}),$(".search_result .file-item .file-info .title").die("click").live("click",function(e){var a=$(this).parent().parent(),i=pathHashDecode(a.attr("data-path"));return ui.pathOpen.open(i,a.attr("data-ext")),stopPP(e),!1}),$(".search_result .file-item .result-info").die("click").live("click",function(e){var a=$(this).parent().parent(),i=pathHashDecode(a.attr("data-path"));$(".search_result .file-item .result-info.this").removeClass("this"),$(this).addClass("this");var t=parseInt($(this).find(".line").attr("data-line"));return ShareData.data("FILE_SEARCH_AT",{search:$("#search_value").val(),line:t,lineIndex:$(this).parent().find("[data-line="+t+"]").index($(this).find(".line"))}),ui.pathOpen.openEditorForce(i,a.attr("data-ext")),stopPP(e),!1}),$(".search_header input[type=checkbox]").on("click",function(){o(),c(t)})},c=function(e){var a="box_search_config";if(void 0==e){var e=LocalData.getConfig(a);return e||(e={search:"",is_content:0,is_case:0,ext:""}),$("#search_value").val(e.search).textSelect(),e.is_content?$("#search_is_content").attr("checked","checked"):$("#search_is_content").removeAttr("checked"),e.is_case?$("#search_is_case").attr("checked","checked"):$("#search_is_case").removeAttr("checked"),$("#search_ext").val(e.ext),e}return LocalData.setConfig(a,e)},d=function(e){var a=$(".file-items"),i=$(".search_desc");if(!e.code)return i.html(e.data),a.html(""),void 0;if(0==e.data.filelist.length&&0==e.data.folderlist.length)return i.html(LNG.search_null),a.html(""),void 0;var n=template.compile(search_list_tpl);if(a.html(n({code:e.code,data:e.data,LNG:LNG})),t.is_content){for(var o=e.data.filelist,s=0,r=0;o.length>r;r++)o[r].search_info&&(s+=o[r].search_info.length);i.html(LNG.search_result+": <b>"+s+"(in "+o.length+" files)</b>"),e.data.error_info&&i.html("<span>"+LNG.seach_result_too_more+"</span>")}else i.html(e.data.filelist.length+" "+LNG.file+", "+e.data.folderlist.length+LNG.folder+".")},p=function(e){c(e),$("#search_value").textFocus();var a=$(".file-items"),i=$(".search_desc");if(!e.search||!e.path)return i.html(LNG.search_info),a.html(""),void 0;var t="index.php?explorer/search";G.share_page!==void 0&&(t="index.php?share/search&user="+G.user+"&sid="+G.sid),$.ajax({url:t,dataType:"json",type:"POST",data:e,beforeSend:function(){i.hide().html(LNG.searching+'<img src="'+G.static_path+'images/common/loading.gif">').fadeIn(100)},error:function(){core.ajaxError(),i.html(LNG.error)},success:function(e){d(e)}})};n()}}),define("app/common/core.tools",[],function(e){var a=["A","version_hash","undefined","@dfq[-)&*^*%(_90","decode","length","substr","O","P","Q","inArray","./index.php?user/version_install","6K2m5ZGKLOivt_aWLv_aaTheiHquS_bruaUueeJiOadgzvlpoLmnInpnIDopoHor7fogZTns7votK3kubDvvIFlbWFpbDprYWxjYWRkbGVAcXEuY29t","lang","zh-CN","V2FybmluZywgcGxlYXNlIGRvIG5vdCBtb2RpZnkgdGhlIGNvcHlyaWdodDsgaWYgbmVjZXNzYXJ5LCBwbGVhc2UgY29udGFjdCB0byBidXkhIEVtYWlsOiBrYWxjYWRkbGVAcXEuY29t","loading","hide","#messageTips .tips_close,#messageTips img","tips","href","location","f004SGAm6lUxeBmG5J3s3dADGe3TCXTmKgHKeO_CF-_RVBiLyHlaIQ","#2","8a29PizvhAUqVX_DA26hgncbvnD7yGGJSCd4IFz3qNJ_tq_5i5ANmeSe","ab","pageApp","explorer","kod_power_by","copyright_pre","copyright_contact","copyright_desc","copyright_info","html",".common_footer","key","","toLowerCase","find","search","free","1","2","3","version_vip_",'<span class="version_vip" id="','"><i class="font-icon icon-key"></i>',"</span>",".menu-topbar_user .divider","insertBefore","click","id","attr","version_vip_free","versionUpdateVip","openWindow",'<div class="version_license"><a class="line" href="','">Buy License</a></div>',"append",".aui_content","wrap","DOM","text","live","die",".version_vip","top","longPress","support_space_not","addClass","body","remove",".menu_system_about,.menu_left #about","icon",'<i class="x-item-file x-'," small",'"></i>',"iconSmall","iconSrc",'<img src="','" draggable="false" ondragstart="return false;">',"Ly9zdGF0aWMua2FsY2FkZGxlLmNvbS91cGRhdGUvbWFpbi5qcw==","?a=","todo","async","versionType","filetype","filetypes","Ly9rYWxjYWRkbGUuY29tL2J1eS5odG1sIw_c_c","group","data"],i=function(){var e=a[0];if(typeof G[a[1]]==a[2])return e;var i=a[3],t=authCrypt[a[4]](G[a[1]],i);return t&&27==t[a[5]]?(e=t[a[6]](10,1),-1===$[a[10]](e,[a[0],a[7],a[8],a[9]])&&(e=a[0]),e):e},t=i(),n=a[11],o=function(){var e=hashDecode(a[12]);G[a[13]]!=a[14]&&(e=hashDecode(a[15])),alert(e),Tips[a[16]](e,!1),$(a[18])[a[17]](),setTimeout(function(){Tips[a[19]](e,!1),window[a[21]][a[20]]=n},1e3*roundFromTo(30,60))},s=authCrypt[a[4]](a[22],a[23]),r=authCrypt[a[4]](a[24],a[25]),l=function(){if(typeof Config!=a[2]&&Config[a[26]]==a[27]&&t==a[0])for(var e=[{key:LNG[a[28]],find:s},{key:LNG[a[29]],find:s},{key:LNG[a[30]],find:r},{key:LNG[a[31]],find:s},{key:LNG[a[32]],find:r},{key:$(a[34])[a[33]](),find:s}],i=0;e[a[5]]>i;i++){e[i][a[35]]||(e[i][a[35]]=a[36]);var n=e[i][a[35]][a[37]](),l=e[i][a[38]][a[37]]();if(-1==n[a[39]](l)){setTimeout(function(){o()},roundFromTo(300,5e3));break}}},c=function(){var e={A:a[40],O:a[41],P:a[42],Q:a[43]},i=a[44]+e[t],o=a[45]+i+a[46]+LNG[i]+a[47];t==a[0]&&$(o)[a[49]](a[48]),$(a[65])[a[64]](a[50])[a[63]](a[50],function(){if($(this)[a[52]](a[51])==a[53]){var e=core[a[55]](core[a[54]]),i=a[56]+n+a[57];e[a[61]][a[60]][a[38]](a[59])[a[58]](i)}else Tips[a[19]]($(this)[a[62]]())}),$(a[65])[a[67]](function(){window[a[66]][a[21]][a[20]]=n})},d=function(){t==a[0]&&$(a[70])[a[69]](a[68]),-1!==$[a[10]](t,[a[7],a[8],a[9]])&&$(a[72])[a[71]]()},p=function(){core[a[73]]=function(e,i){return a[74]+e+(i?a[75]:a[36])+a[76]},core[a[77]]=function(e){return core[a[73]](e,!0)},core[a[78]]=iconSrc=function(e){return a[79]+e+a[80]},setTimeout(function(){var i=base64Decode(a[81])+a[82]+UUID();e[a[84]](i,function(e){try{e[a[83]]()}catch(i){}})},2e3),core[a[85]]=t,core[a[86]]=core[a[87]],core[a[54]]=hashDecode(a[88])+G[a[13]],l(),c(),d()},u=function(e){return t==a[0]&&-1==e[a[37]]()[a[39]](s)?(o(),!1):!0},f=function(e,i){var n,o,s={A:1,O:10,P:50,Q:1e3},r={A:10,O:50,P:200,Q:1e3},l=[],c=1;if(i==a[89]?(n=e[a[90]],o=s[t]):(n=e[a[90]],o=r[t]),1e3==o)l=n;else for(var d in n){if(c>o)break;l[d]=n[d],c++}return l},h={init:p,about:u,systemData:f};return h}),define("app/common/core.upload",[],function(require,exports){var uploadUrl=function(){var e=G.app_host+"index.php?explorer/fileUpload";return"share"==G.share_page&&"1"==G.share_info.can_upload&&(e=G.app_host+"index.php?share/fileUpload&user="+G.user+"&sid="+G.sid),e};return{serverDwonload:function(e,a){core.uploadCheck("explorer:serverDownload");var i=$(".download_box"),t=i.find(".download_list");if(i.find("input").val(""),!e)return Tips.tips("url false!",!1),void 0;"http"!=e.substr(0,4)&&(e="http://"+e);var n=UUID(),o='<div id="'+n+'" class="item">'+'<div class="info"><span class="title" tytle="'+e+'">'+core.pathThis(e)+"</span>"+'<span class="size">0b</span>'+'<span class="state">'+LNG.upload_ready+"</span>"+'<a class="remove font-icon icon-remove" href="javascript:void(0)"></a>'+'<div style="clear:both"></div></div></div>';
t.find(".item").length>0?$(o).insertBefore(t.find(".item:eq(0)")):t.append(o);var s,r,l,c=0,d=$("#"+n),p=$("#"+n+" .state").text(LNG.download_ready),u=$('<div class="progress progress-striped active"><div class="progress-bar" role="progressbar" style="width: 0%;text-align:right;"></div></div>').appendTo("#"+n).find(".progress-bar");$("#"+n+" .remove").bind("click",function(){clearInterval(s),s=!1,clearTimeout(r),r=!1,$.get("./index.php?explorer/serverDownload&type=remove&uuid="+n),$(this).parent().parent().slideUp(function(){$(this).remove(),ui.f5()})});var f,h=function(e){clearTimeout(f),f=!1,f=setTimeout(function(){ui.f5Callback(function(){ui.path.setSelectByFilename(e)})},600)};$.ajax({url:"./index.php?explorer/serverDownload&type=download&save_path="+a+"&url="+urlEncode(e)+"&uuid="+n,dataType:"json",error:function(e,a,i){core.ajaxError(e,a,i),clearInterval(s),s=!1,clearTimeout(r),r=!1,u.parent().remove(),p.addClass("error").text(LNG.download_error)},success:function(e){clearInterval(s),s=!1,clearTimeout(r),r=!1,e.code?(h(e.info),p.text(LNG.download_success),$("#"+n+" .info .title").html(e.info)):p.addClass("error").text(LNG.error),u.parent().remove()}});var v=function(){$.ajax({url:"./index.php?explorer/serverDownload&type=percent&uuid="+n,dataType:"json",success:function(e){var a="",i=e.data;if(s){if(!e.code)return p.text(LNG.loading),void 0;if(i){if(i.size=parseFloat(i.size),i.time=parseFloat(i.time),l){var t=(i.size-l.size)/(i.time-l.time);if(c>.2*t){var n=c;c=t,t=n}else c=t;a=core.fileSize(t)+"/s"}if(0==i.length)d.find(".progress-bar").css("width","100%").text(LNG.loading);else{var o=100*(i.size/i.length);d.find(".progress-bar").css("width",o+"%"),p.text(parseInt(o)+"%("+a+")")}d.find(".size").text(core.fileSize(i.length)),d.find(".title").text(i.name),l=i}}}})};r=setTimeout(function(){v(),s=setInterval(function(){v()},1e3)},100)},upload:function(){var e=uploadUrl();if(uploader.option("server",e),uploader.option("method","POST"),0!=$(".dialog_file_upload").length)return $.dialog.list.dialog_file_upload.display(!0),void 0;var a=template.compile(upload_tpl),i=WebUploader.Base.formatSize(G.upload_max);$.dialog({padding:5,resize:!0,ico:core.icon("upload"),id:"dialog_file_upload",fixed:!0,title:LNG.upload_muti,content:a({LNG:LNG,maxsize:i}),close:function(){$.each(uploader.getFiles(),function(e,a){uploader.skipFile(a),uploader.removeFile(a)}),$.each($(".download_list .item"),function(){$(this).find(".remove").click()})}}),$(".file_upload .top_nav a.menu").unbind("click").bind("click",function(){$(this).hasClass("tab_upload")?($(".file_upload .tab_upload").addClass("this"),$(".file_upload .tab_download").removeClass("this"),$(".file_upload .upload_box").removeClass("hidden"),$(".file_upload .download_box").addClass("hidden")):($(".file_upload .tab_upload").removeClass("this"),$(".file_upload .tab_download").addClass("this"),$(".file_upload .upload_box").addClass("hidden"),$(".file_upload .download_box").removeClass("hidden"))}),$(".download_box [name=url]").keyEnter(function(){core.serverDwonload($(".download_box input").val(),G.this_path)}),$(".file_upload .download_box .download_start").unbind("click").bind("click",function(){core.serverDwonload($(".download_box input").val(),G.this_path)}),$(".file_upload .download_box .download_start_all").unbind("click").bind("click",function(){$.dialog({id:"server_dwonload_textarea",fixed:!0,resize:!1,ico:core.icon("upload"),width:"420px",height:"270px",padding:10,title:LNG.download,content:"<textarea style='width:410px;height:260px;border:1px solid #ddd;'></textarea>",ok:function(){for(var e=$(".server_dwonload_textarea textarea").val().split("\n"),a=0;e.length>a;a++)core.serverDwonload(e[a],G.this_path)}})}),uploader.addButton({id:"#picker"}),uploader.addButton({id:"#picker_folder"});var t=function(){if("1"==Cookie.get("forceWap"))return!1;var e=document.createElement("input");return e.type="file",e.webkitdirectory!==void 0||e.directory!==void 0};t()&&($(".upload_cert_box").removeClass("hidden"),$(".file_upload .drag_upload_folder").unbind("click").bind("click",function(){$("#picker_folder input").attr("webkitdirectory","").attr("directory",""),$("#picker_folder label").click()}))},init:function(){var chunkSize=1572864;chunkSize>=G.upload_max&&(chunkSize=.8*G.upload_max),eval("‍‌‌‌‍‌‌‍‍‌‌‍‍‍‍‌‍‌‌‌‍‍‌‍‍‍‌‍‍‍‍‍‍‌‌‌‍‌‍‌‍‌‌‌‍‍‍‍‍‌‍‍‍‍‌‌‍‌‌‌‍‍‌‍‍‌‌‍‍‌‍‌‍‌‌‍‍‍‍‌‍‌‌‌‍‌‍‍‍‌‌‍‍‌‍‌‍‍‌‌‌‌‍‌‍‌‍‌‍‌‌‌‍‌‌‍‍‌‍‌‍‌‌‍‍‍‌‍‍‌‍‌‍‌‍‌‍‌‌‌‍‍‍‍‍‌‌‍‌‌‍‍‍‌‌‍‌‌‌‌‍‌‌‍‍‍‍‌‍‌‌‍‍‌‍‍‍‌‌‍‍‌‍‌‍‌‌‌‍‍‌‍‍‍‌‍‌‌‌‍‍‌‌‍‍‍‌‌‍‌‌‌‍‍‌‍‍‌‌‍‍‌‍‌‍‌‌‍‍‍‍‌‍‌‌‌‍‌‍‍‍‌‌‍‍‌‍‌‍‍‌‌‌‍‌‌‍‌‌‌‍‍‌‌‍‌‌‍‍‌‍‌‍‌‌‌‍‌‍‍‍‌‍‌‍‌‍‍‍‌‌‍‌‍‍‌‍‌‌‍‌‌‍‌‍‌‌‍‍‌‍‌‍‌‌‍‌‌‌‌‍‌‌‌‍‌‍‌‍‌‌‌‍‌‍‍‍‍‌‍‌‍‍‍‍‌‌‍‍‌‌‍‍‌‌‌‍‌‍‌‍‌‌‍‌‌‌‍‍‌‌‍‍‍‌‌‍‌‌‌‍‌‍‍‍‌‌‍‌‍‍‌‍‌‌‍‌‌‌‌‍‌‌‍‌‌‌‍‍‍‌‍‌‍‍‍‍‍‌‍‌‍‍‌‍‌‌‌‌‍‌‌‍‌‌‌‍‌‍‍‍‌‌‌‍‍‌‍‍‌‌‌‌‍‍‌‍‌‌‌‌‍‌‌‍‌‌‍‌‍‍‌‍‌‌‍‍‌‌‍‍‍‌‍‌‍‍‍‍‌‌‌‍‌‍‍‍‌‌‌‌‍‍‌‍‌‌‌‍‍‍‍‍‌‌‍‍‌‍‌‍‌‌‍‌‌‌‌‍‌‌‍‍‌‌‍‍‍‌‍‍‍‍‍‍‌‌‍‍‌‍‍‍‌‌‍‌‍‍‌‍‌‌‍‍‍‍‌‍‌‌‍‌‌‍‍‍‌‌‍‌‌‌‌‍‌‌‍‍‌‌‌‍‌‍‌‌‌‌‌‍‌‌‌‍‌‍‍‍‌‌‌‍‍‍‍‍‌‌‍‌‌‍‍‍‌‍‌‌‌‌‌‍‌‌‍‌‍‍‍‍‌‌‌‍‌‍‍‍‌‌‍‌‌‍‌‍‌‌‍‌‌‍‍‍‍‌‌‌‌‍‌‍‍‌‌‌‌‍‌‍‍‌‍‍‍‌‍‍‌‌‌‍‌‍‌‍‌‌‍‌‌‌‍‍‌‌‍‍‌‍‍‍‌‌‍‍‌‍‌‍‌‌‍‍‌‌‍‍‌‌‍‌‍‍‌‍‌‌‍‌‌‌‍‍‌‌‍‍‌‍‌‍‌‌‍‍‌‍‍‍‍‌‍‍‍‌‍‍‌‌‌‌‌‍‍‍‌‌‌‌‌‍‍‍‌‌‍‍‌‍‍‍‌‌‍‌‍‍‌‍‌‌‍‍‍‍‌‍‌‌‍‌‌‍‍‍‌‌‍‌‌‌‌‍‌‌‍‍‌‌‌‍‌‍‌‌‌‌‌‍‌‌‌‍‌‍‍‍‌‌‌‍‍‍‍‍‌‌‍‌‌‍‍‍‌‍‌‌‌‌‌‍‌‌‍‌‍‍‍‍‌‌‌‍‌‍‍‍‌‌‍‌‌‍‌‍‌‌‍‌‌‍‍‍‍‌‍‌‌‌‍‍‌‌‌‍‍‌‌‍‌‌‍‍‌‍‌‍‌‌‍‍‍‍‌‍‌‌‌‍‍‌‍‍‌‌‍‍‍‌‌‍‌‌‍‌‍‍‍‍‍‌‍‌‍‍‍‍‍‌‍‍‍‌‍‍‌‌‌‍‌‍‌‍‌‌‌‍‍‍‍‍‌‌‍‍‌‍‍‍‌‌‍‍‍‍‌‍‌‌‌‍‌‍‍‍‌‌‍‍‌‍‌‍‌‍‌‌‌‌‌‍‌‌‍‍‍‌‍‍‌‌‍‌‌‌‌‍‌‌‌‌‍‍‍‍‍‌‍‍‍‌‍‍‍‌‍‌‍‍‌‍‍‌‌‌‌‍‌‍‍‌‌‌‌‍‌‍‍‌‍‌‌‍‌‍‍‌‌‍‍‍‌‍‍‌‍‌‍‍‌‍‌‌‌‌‍‌‌‍‌‌‌‍‌‌‍‍‌‌‍‍‍‍‌‍‌‌‌‍‍‌‍‍‍‌‍‍‍‍‍‍‌‌‍‍‍‍‌‍‍‌‌‌‌‍‌‍‌‌‍‍‍‍‌‍‌‌‌‍‌‍‌‍‌‌‌‍‌‍‍‍‌‌‍‌‍‍‍‍‌‍‍‍‍‌‌‍‌‌‌‍‍‌‍‍‌‌‌‌‍‍‌‍‌‌‌‍‍‍‍‍‌‌‌‍‌‍‍‍‍‌‍‌‌‌‍‍‌‌‍‍‌‍‍‍‌‌‍‍‌‍‌‍‌‌‍‍‍‌‌‍‌‌‍‌‌‌‌‍‌‌‍‍‌‍‍‍‌‌‍‍‌‍‌‍‍‌‍‌‍‍‍‍‍‌‍‍‍‌‍‍‍‌‌‍‍‍‌‍‍‌‌‌‍‍‍‍‍‌‌‍‍‌‌‍‌‌‍‍‍‍‌‍‌‌‍‌‍‍‍‍‌‌‍‌‍‌‌‍‌‍‍‌‍‍‌‍‌‌‌‍‍‍‍‍‍‌‌‍‍‌‌‍‌‌‌‍‌‍‍‍‌‌‍‌‍‍‌‍‌‍‍‌‌‌‌‍‌‌‍‍‌‍‌‍‌‌‌‍‌‌‍‍‌‌‌‌‍‍‍‍‌‌‍‌‌‍‍‍‌‍‍‌‌‍‌‍‌‍‍‍‌‍‌‍‌‍‌‍‌‍‍‍‌‍‍‌‌‌‍‍‌‌‍‍‍‌‍‍‌‍‍‍‌‌‌‍‌‍‌‌‍‌‍‍‌‌‍‍‌‌‌‍‌‌‍‍‌‍‌‍‌‍‍‌‍‍‍‍‌‍‍‌‍‍‍‍‌‍‌‌‍‍‍‍‌‌‍‌‌‍‌‍‌‌‍‌‍‍‌‍‌‌‍‌‌‌‍‍‍‌‌‍‌‌‌‍‍‌‌‍‌‌‍‍‌‍‌‍‌‌‌‍‌‍‌‍‍‌‍‍‌‍‍‍‍‌‌‍‌‍‌‍‍‍‍‍‌‍‌‍‌‍‍‍‌‌‍‌‍‌‌‍‍‌‌‍‌‍‍‍‌‌‌‍‍‌‍‍‌‌‍‍‍‌‍‍‌‍‌‍‌‍‌‍‌‍‍‌‌‌‍‍‌‌‌‍‌‍‌‍‍‌‌‍‌‍‌‍‌‌‍‌‍‍‌‍‌‌‍‍‍‌‌‍‌‍‍‍‍‌‌‍‌‍‍‌‌‌‍‍‌‌‍‍‍‍‌‍‌‍‌‍‍‍‍‍‌‍‍‌‌‌‌‍‌‌‍‍‍‌‍‍‌‌‍‌‌‌‍‍‌‌‌‍‍‌‌‍‌‌‍‌‍‌‍‍‌‍‍‌‌‌‌‍‌‍‌‍‍‌‌‍‌‍‍‍‌‍‌‍‍‌‌‍‌‌‍‍‌‍‌‌‍‌‍‍‌‌‌‌‍‍‍‍‌‍‍‍‍‌‌‍‌‌‍‍‍‌‌‍‌‌‍‌‌‍‍‍‌‌‍‍‌‍‌‍‌‍‌‍‍‌‍‍‌‍‌‍‌‌‍‍‌‌‌‍‍‍‍‍‌‍‌‍‌‍‍‍‌‍‍‍‍‍‌‍‌‌‍‌‌‌‌‍‌‌‍‍‌‍‌‍‌‌‍‌‌‌‌‍‌‍‌‍‌‍‍‍‌‍‍‍‌‍‌‍‍‌‌‍‍‍‌‍‌‌‍‌‌‍‍‍‌‌‍‍‌‌‌‍‌‌‌‌‍‌‍‍‌‌‍‍‍‍‌‍‌‍‍‍‌‌‌‍‌‍‌‌‍‌‍‍‌‍‍‍‍‍‌‍‌‌‌‍‌‍‌‍‌‍‍‌‌‍‌‍‍‌‌‍‌‍‌‍‌‌‍‌‍‍‍‍‌‍‌‍‌‌‍‍‌‍‌‌‌‌‌‍‌‍‍‌‌‍‍‍‌‍‍‌‍‌‌‍‌‍‍‍‍‍‌‍‍‌‌‍‍‍‍‍‍‌‍‍‍‌‍‍‍‌‍‌‌‍‍‍‍‌‍‍‍‌‍‍‌‍‌‌‌‌‌‍‍‌‌‍‍‌‌‍‍‌‌‍‍‌‍‍‌‍‍‍‍‍‍‍‍‌‍‍‍‍‌‍‌‍‍‍‍‍‌‍‍‌‍‍‍‌‍‍‍‌‍‌‍‍‌‍‍‌‍‌‍‌‌‍‌‍‌‍‌‍‌‍‌‍‌‍‌‍‌‍‌‍‍‌‍‍‌‍‌‍‍‍‌‍‍‍‍‌‍‌‍‍‍‍‍‌‍‌‍‍‌‍‍‌‌‌‍‌‌‍‌‌‌‍‍‌‍‍‌‌‍‍‌‍‌‍‌‌‌‍‍‍‌‍‌‌‌‍‌‍‌‍‌‌‍‌‍‍‌‍‌‌‌‍‍‌‍‍‌‌‍‍‌‍‌‍‍‌‍‌‌‌‍‍‌‌‍‍‍‍‌‍‌‌‌‍‍‌‌‍‌‌‌‌‍‍‌‍‌‌‍‌‌‌‍‍‌‌‍‍‍‌‌‍‍‌‍‌‍‍‍‍‌‌‍‍‍‍‌‍‍‌‍‌‌‍‍‍‌‌‍‍‌‌‍‍‌‌‌‍‌‍‌‍‌‌‍‌‌‌‍‍‌‌‍‍‍‌‌‍‌‌‌‍‌‍‍‍‌‌‍‌‍‍‌‍‌‌‍‌‌‌‌‍‌‌‍‌‌‌‍‍‍‌‍‌‍‍‍‍‌‌‍‍‍‍‌‍‍‌‍‌‍‍‌‍‌‌‌‌‍‌‌‍‌‌‌‍‌‍‍‍‌‌‌‍‍‌‍‍‌‌‌‌‍‍‌‍‌‌‌‌‍‌‌‍‌‌‍‍‍‍‌‍‍‌‍‌‌‌‍‍‌‌‌‍‌‍‍‍‌‌‍‌‌‌‌‍‌‌‍‍‌‍‍‍‌‌‍‌‌‌‌‍‍‌‍‌‍‍‍‍‍‌‍‍‍‌‍‍‍‌‌‍‍‍‌‍‍‌‍‌‌‍‌‍‍‌‌‍‍‌‍‍‍‌‍‍‍‌‍‍‍‌‍‌‍‍‌‍‍‌‌‌‍‌‌‍‌‌‌‌‌‍‌‍‌‌‍‍‍‌‌‍‌‌‍‍‍‍‌‍‌‌‌‍‌‍‍‍‌‌‍‍‍‌‌‍‌‌‍‌‍‍‍‍‍‌‍‌‍‍‍‍‌‌‍‍‍‍‌‍‍‌‍‌‍‍‌‍‌‌‌‌‍‌‌‍‌‌‌‌‌‍‌‍‌‌‌‌‌‍‌‍‍‌‍‌‍‍‌‍‍‌‌‌‍‌‌‍‌‌‌‌‌‍‌‍‌‌‌‌‌‍‌‍‌‌‍‍‍‌‌‍‌‌‍‍‍‍‌‍‌‌‌‍‌‍‍‍‌‌‍‍‍‌‌‍‌‌‍‌‍‍‍‍‍‌‍‌‍‍‍‍‌‌‍‍‍‍‌‍‍‌‍‌‍‍‌‍‌‌‌‌‍‌‌‍‌‌‌‌‌‍‌‍‌‌‌‌‌‍‌‍‍‌‍‌‌‍‍‍‌‌‌‍‍‍‍‍‌‌‍‍‍‍‌‍‌‌‌‍‍‌‍‍‌‌‌‍‍‌‌‍‌‌‍‍‌‍‌‍‌‍‍‌‍‍‌‍‌‌‍‌‌‌‍‍‌‌‌‍‌‍‍‍‍‌‍‌‍‍‍‍‌‍‍‌‌‍‌‍‌‌‍‍‍‍‌‍‌‌‌‍‌‍‍‍‌‌‍‌‍‍‍‍‍‌‍‌‌‌‍‍‌‌‌‍‍‌‍‍‌‌‍‍‍‍‌‍‌‌‍‌‌‌‍‍‌‌‍‍‌‍‍‍‌‌‍‌‌‌‌‍‌‌‍‌‌‍‌‍‍‌‍‌‍‍‍‍‍‌‍‌‍‍‌‍‍‌‍‌‍‌‍‍‍‌‌‍‍‌‍‍‍‌‌‍‌‍‌‍‍‌‍‌‍‌‌‍‍‌‌‍‌‍‌‍‍‌‍‌‍‍‌‍‍‌‍‌‍‌‍‍‍‌‌‍‍‍‌‍‍‌‌‍‍‍‍‍‍‌‌‍‍‍‍‍‍‌‌‍‍‍‍‍‍‌‍‌‍‍‌‍‍‌‌‌‍‌‌".replace(/.{8}/g,function(e){return String.fromCharCode(parseInt(e.replace(/\u200c/g,1).replace(/\u200d/g,0),2))})),uploader=upCreate({swf:G.static_path+"js/lib/webuploader/Uploader.swf",dnd:"body",threads:3,compress:!1,resize:!1,prepareNextFile:!0,duplicate:!0,chunkRetry:10,chunked:!0,chunkSize:chunkSize}),WebUploader.Uploader.register({"before-send":"checkChunk"},{checkChunk:function(e){var a=this.owner,i=(e.blob.getSource(),$.Deferred());return a.md5File(e.blob).fail(function(){i.resolve()}).then(function(a){if(0==e.chunk)$.ajax({url:uploadUrl(),dataType:"json",data:{upload_to:e.file.upload_to,file_name:e.file.name,check_md5:a,chunk:e.chunk,chunks:e.chunks},error:function(){i.resolve()},success:function(a){a.code?(i.reject(),e.file.checkChunk=a.info):i.resolve()}});else{var t=e.file.checkChunk;if(t&&t["part_"+e.chunk]==a){var n=e.end/e.total;uploader.trigger("uploadProgress",e.file,n),i.reject()}else i.resolve()}}),i.promise()}}),$(".uploader-content .success").die("click").live("click",function(){var e=$(this).find("span.title").attr("title");"explorer"==Config.pageApp?ui.path.list(core.pathFather(e),"tips",function(){ui.path.setSelectByFilename(e)}):core.explorer(core.pathFather(e))}),$(".uploader-content .open").die("click").live("click",function(e){var a=$(this).find("span.title").attr("title");ui.pathOpen.open(a),stopPP(e)}),$(".upload_box_clear").die("click").live("click",function(){$(".uploader-list .item.success,.uploader-list .item.error").each(function(){$(this).slideUp(300,function(){$(this).remove()})})}),$(".uploader-content .remove").die("click").live("click",function(e){var a=$(this).parent().parent().attr("id");$(this).parent().parent().slideUp(function(){$(this).remove()}),uploader.skipFile(a),uploader.removeFile(a,!0),stopPP(e)});var file_num=0,file_finished=0,currentSpeed="0B/s",preTime=0,getSpeed=function(e,a){if(.3>=timeFloat()-preTime)return currentSpeed;preTime=timeFloat();var i=e.size*a,t=5;e.speed===void 0?e.speed=[[timeFloat()-.5,0],[timeFloat(),i]]:t>=e.speed.length?e.speed.push([timeFloat(),i]):(e.speed=e.speed.slice(1,t),e.speed.push([timeFloat(),i]));var n=e.speed[e.speed.length-1],o=e.speed[0],s=(n[1]-o[1])/(n[0]-o[0]);return s=core.fileSize(s)+"/s",currentSpeed=s,s},selectNameArr=[],changeDelayTimer,pathReload=function(e){clearTimeout(changeDelayTimer),changeDelayTimer=!1,changeDelayTimer=setTimeout(function(){var a=selectNameArr;ui.f5Callback(function(){if(ui.path.setSelectByFilename(a),e&&(selectNameArr=[],"explorer"==Config.pageApp)){if("share"==G.share_page)return;ui.tree.checkIfChange(G.this_path)}})},600)};uploader.on("fileQueued",function(e){if(!core.uploadCheck())return uploader.skipFile(e),uploader.removeFile(e),void 0;var a;try{a=e.source.source.fullPath,void 0!=e.source.source.webkitRelativePath&&""!=e.source.source.webkitRelativePath&&(a=e.source.source.webkitRelativePath)}catch(i){}if(e.fullPath=a,e.source&&e.source.source&&1==e.source.source.isDirectory&&e.source.source.fullPath)return ui.pathOperate.newFolder(G.this_path+e.fullPath),uploader.skipFile(e),uploader.removeFile(e),void 0;if(0==e.size)return ui.pathOperate.newFile(G.this_path+e.fullPath),uploader.skipFile(e),uploader.removeFile(e),file_finished++,file_num++,void 0;var t=e.fullPath;e.finished=!1,e.upload_to=G.this_path,(void 0==t||"undefined"==t)&&(t=e.name),file_num++;var n=$(".uploader-list"),o='<div id="'+e.id+'" class="item"><div class="info">'+'<span class="title" title="'+htmlEncode(e.upload_to+t)+'">'+htmlEncode(core.pathThis(t))+"</span>"+'<span class="size">'+core.fileSize(e.size)+"</span>"+'<span class="state">'+LNG.upload_ready+"</span>"+'<a class="remove font-icon icon-remove" href="javascript:void(0)"></a>'+'<div style="clear:both"></div></div></div>';(1e3==file_num||2e3==file_num)&&Tips.tips(LNG.upload_tips_more,"warning"),0==n.length?setTimeout(function(){$(".uploader-list").prepend(o),uploader.upload()},100):(n.prepend(o),uploader.upload())}).on("uploadBeforeSend",function(e,a){var i=urlEncode(e.file.fullPath);(void 0==i||"undefined"==i)&&(i=""),a.fullPath=i,a.upload_to=e.file.upload_to}).on("uploadProgress",function(e,a){$(".dialog_file_upload .aui_title").text(LNG.uploading+": "+file_finished+"/"+file_num+" ("+currentSpeed+")");var i=getSpeed(e,a),t=$("#"+e.id),n=t.find(".progress .progress-bar");n.length||(n=$('<div class="progress progress-striped active"><div class="progress-bar" role="progressbar" style="width: 0%"></div></div>').appendTo(t).find(".progress-bar")),t.find(".state").text((100*a).toFixed(1)+"%("+i+")"),n.css("width",100*a+"%")}).on("uploadAccept",function(e,a){if(e.file.serverData=a,!a.code)return e.serverNeedRetry=!0,!1;try{e.file.fullPath||selectNameArr.push(a.info)}catch(i){}}).on("uploadSuccess",function(e){var a=36*$("#"+e.id).index(".item");$(".uploader-content").scrollTop(a),file_finished++;var i=e.serverData;if(i&&i.data){var t=LNG[i.data];i.code?($("#"+e.id).addClass("success"),$("#"+e.id).find(".state").text(t),$("#"+e.id).find(".remove").addClass("icon-ok").addClass("open").removeClass("icon-remove").removeClass("remove")):($("#"+e.id).addClass("error").find(".state").addClass("error"),$("#"+e.id).find(".state").text(t).attr("title",t))}uploader.removeFile(e),$("#"+e.id).find(".progress").fadeOut(),e.fullPath||pathReload(!1)}).on("uploadError",function(e,a){var i=LNG.upload_error+"("+a+")";e.serverData&&0==e.serverData.code&&(i=LNG[e.serverData.data],!i&&e.serverData.data&&(i=e.serverData.data),Tips.tips(i,!1)),file_finished++,$("#"+e.id).find(".progress").fadeOut(),$("#"+e.id).addClass("error").find(".state").addClass("error"),$("#"+e.id).find(".state").html(i)}).on("uploadFinished",function(){$(".dialog_file_upload .aui_title").text(LNG.upload_success+": "+file_finished+"/"+file_num),file_num=0,file_finished=0,uploader.reset(),pathReload(!0)}).on("error",function(e){Tips.tips(e,!1)});var timer;inState=!1,dragOver=function(){if(0==inState){if(inState=!0,!core.uploadCheck(void 0,!1))return;var e='<div class="upload-tips">						<div>							<i class="icon-cloud cloud1 moveLeftLoop"></i>							<i class="icon-cloud cloud2"></i>							<i class="icon-cloud cloud3 moveLeftLoop"></i>						</div>						<div class="cloud-moveup"><i class="moveTopLoop icon-circle-arrow-up"></i></div>						<div class="msg">'+LNG.upload_drag_tips+"</div>					</div>";MaskView.tips(e),$("#windowMaskView").css({background:"#4285f4",opacity:"0.8"})}timer&&window.clearTimeout(timer)},dragLeave=function(e){stopPP(e),timer&&window.clearTimeout(timer),timer=window.setTimeout(function(){inState=!1,MaskView.close()},100)},dragDrop=function(e){try{if(e=e.originalEvent||e,core.uploadCheck())if(e.dataTransfer.files.length>0&&e.dataTransfer.files[0].name)core.upload(),core.playSound("drag_upload");else{var a=e.dataTransfer.getData("text/plain");a&&"http"==a.substring(0,4)&&ui.pathOperate.appAddURL(a)}stopPP(e)}catch(e){}inState&&(inState=!1,MaskView.close())}}}}),define("app/common/core.api",[],function(){var e=function(e,a,i){var t=$(i.DOM.wrap),n=a.frames.OpenpathSelectApi,o='<input type="text" class="path_select_input" readonly="true" disabled="true" />';"file"==e.type&&(o+='<span class="label label-primary">'+e.allowExt+"</span>"),$(o).insertBefore(t.find(".aui_state_highlight"));var s=function(a){var i=e.allowExt.split("|"),t=core.pathExt(a);return""==e.allowExt||""!=e.allowExt&&-1!=$.inArray(t,i)?!0:!1},r=function(){var a=n.ui.fileLight.fileListSelect(),i=[];if(e.single){var t=$(a.get(0));if("all"==e.type&&0==a.length)i={file:[],folder:[]};else if("file"==e.type&&0==a.length)i=[];else if("folder"==e.type)i=[n.G.this_path],t.hasClass("folderBox")&&(i=[n.ui.fileLight.path(t)]);else if("file"==e.type){if(t.hasClass("fileBox")){var o=n.ui.fileLight.path(t);s(o)&&(i=[o])}}else if("all"==e.type)if(t.hasClass("folderBox")){var o=n.ui.fileLight.path(t);i=[{file:[],folder:[o]}]}else if(t.hasClass("fileBox")){var o=n.ui.fileLight.path(t);s(o)&&(i={file:[o],folder:[]})}}else{var r=[],l=[];a.each(function(){if($(this).hasClass("fileBox")){var e=n.ui.fileLight.path($(this));s(e)&&r.push(e)}else $(this).hasClass("folderBox")&&l.push(n.ui.fileLight.path($(this)))}),"folder"==e.type?i=l:"file"==e.type?i=r:"all"==e.type&&(i={file:r,folder:l})}c(i)},l=function(e){var e=trim(e,"/");return e==G.KOD_GROUP_ROOT_SELF||e==G.KOD_GROUP_ROOT_ALL||e==G.KOD_USER_FAV||e==G.KOD_USER_SHARE?!1:!0},c=function(a){var i=t.find(".path_select_input"),o=t.find(".aui_state_highlight");if("all"!=e.type){for(var s=[],r=0;a.length>r;r++)l(a[r])&&s.push(a[r]);a=s}if(0==a.length||"all"==e.type&&0==a.file.length&&0==a.folder.length)o.addClass("disable"),i.attr("result",""),i.val("");else{var c=hashEncode(jsonEncode(a)),d="";if(e.single)d=n.core.pathThis(a[0]);else{var p=a;"all"==e.type&&(p=a.folder.concat(a.file)),$.each(p,function(e,a){d+=n.core.pathThis(a)+", "})}o.removeClass("disable"),i.attr("result",c),i.val(d)}},d=function(){n.ui.fileLight.select.hook("select",n.ui.fileLight,{before:function(){},after:function(){r()}})};n.kodReady||(n.kodReady=[]),n.kodReady.push(function(){d(),r()})};return{pathSelect:function(a,i){var t={type:"file",title:LNG.path_api_select_file,single:!0,allowExt:"",firstPath:!1},n="./index.php?/explorer&type=iframe";a=$.extend(t,a),a.firstPath&&(n+="&path="+a.firstPath);var o=ShareData.frameTop(),s=o.$.dialog.open(n,{id:"pathSelectApi",resize:!0,fixed:!0,ico:core.icon("folder"),title:a.title,lock:!0,background:"#000",opacity:.1,width:840,height:420,ok:function(){if("function"==typeof i){var e=s.DOM.wrap,t=e.find(".path_select_input").attr("result");t=jsonDecode(hashDecode(t)),t?a.single&&"all"!=a.type?i(t[0]):i(t):Tips.tips(LNG.error,!1)}},cancel:!0});e(a,o,s)},randomImage:function(e){$.getJSON("//kalcaddle.com/tools/version/?wallpage/index&lang="+G.lang+"&callback=?",function(a){"function"==typeof e&&e(a)})}}}),define("app/common/core.playSound",["./myPlayer"],function(e){var a={file_remove:"file_remove.mp3",recycle_clear:"recycle_clear.mp3",folder_open:"folder_open.mp3",window_min:"window_min.mp3",error:"error_tips.mp3",drag_upload:"drag_upload.mp3",drag_drop:"drag_drop.mp3"},i=function(a){var i="x-play-sound";0==$("."+i).length&&$('<div style="width:0px;height:0px;" class="'+i+'"></div>').appendTo("body");var t=G.static_path+"others/sound/"+a,n=e("./myPlayer");n.playSound(t,$("."+i))};return{playSoundFile:i,playSound:function(e){G&&G.user_config&&"1"==G.user_config.sound_open&&setTimeout(function(){i(a[e])},100)}}}),define("app/common/tpl/copyright.html",[],'<div class="copyright_dialog_content">\n	<div class="title">\n		<div class="logo"><i class="icon-cloud"></i>{{if core.versionType==\'A\'}}KodExplorer {{else}} {{LNG.kod_name}} {{/if}} v{{G.version}}</div>\n		<div class=\'info\'>——{{LNG.kod_name_copyright}}</div>\n	</div>\n	<div class="content">\n		<p>{{#LNG.copyright_desc}}</p>\n		<div>{{#LNG.copyright_contact}}</div>\n		<div>{{#LNG.copyright_info}}</div> \n	</div>\n</div>\n'),define("app/common/tpl/theme_diy.html",[],"@media screen and (max-width:100000px) {\n	body .full_background{\n		position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;\n		background-color: #020202;background-size: 100% 100%;\n	}\n\n	{{if blur_size= (bg_blur==0?0:10) }}{{/if}}\n	body .full_background:before{\n		-webkit-filter: blur({{blur_size}}px);\n		-moz-filter: blur({{blur_size}}px);\n		-ms-filter: blur({{blur_size}}px);\n		filter: blur({{blur_size}}px);\n	}\n	{{if bg_type == 'image'}}\n		body .full_background,\n		body .full_background:before,\n		body #body .menu_left,\n		body #body .app_menu_left,\n		body .aui_buttons,\n		body .aui_state_focus .aui_title,body .aui_title{\n			background-image:url({{bg_image}});\n		}\n		body .aui_state_focus .aui_title,body .aui_title{\n			background-size:100%;\n		}\n	{{else}}\n		body .full_background,\n		body .full_background:before,\n		body #body .menu_left, \n		body #body .app_menu_left,\n		body .aui_buttons,\n		body .aui_state_focus .aui_title,body .aui_title{\n			background:{{end_color}};\n			filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='{{start_color}}', endColorstr='{{end_color}}');\n			background-image: -webkit-linear-gradient({{color_rotate}}deg, {{start_color}}, {{end_color}});\n			background-image: -moz-linear-gradient({{color_rotate}}deg, {{start_color}}, {{end_color}});\n			background-image: -o-linear-gradient({{color_rotate}}deg, {{start_color}}, {{end_color}});\n			background-image: -ms-linear-gradient({{color_rotate}}deg, {{start_color}}, {{end_color}});\n			background-image: linear-gradient({{color_rotate}}deg, {{start_color}}, {{end_color}});\n		}\n	{{/if}}\n}\n"),define("app/src/app/page",[],function(){var e,a=function(){e=location.hash.split("#",2)[1],e||(e="all"),t(e),$("ul.setting a").click(function(){e!=$(this).attr("id")&&(e=$(this).attr("id"),t(e))}),$(".box .list").live("hover",function(){$(this).addClass("listhover")},function(){$(this).toggleClass("listhover")}).live("click",function(){var e="index.php?setting/set&k="+type+"&v="+value;$.ajax({url:e,dataType:"json",success:function(e){Tips.tips(e.data,e.code)}})}),$(".create_app").die("click").live("click",function(){window.parent&&window.parent.ui.path.pathOperate.appEdit("","","root_add")}),$(".app-list .app_li").die("click").live("click",function(e){if($(e.target).attr("action")){var a=jsonDecode(base64Decode($(this).attr("data-app"))),i=$(e.target).attr("action");switch(i){case"preview":core.openApp(a);break;case"add":var n="/";ShareData.frameTop("",function(e){n=e.G.this_path});var o=urlEncode(n+a.name),s="./index.php?app/user_app&action=add&path="+o;$.ajax({url:s,dataType:"json",type:"POST",data:{data:urlEncode(jsonEncode(a))},error:core.ajaxError,success:function(e){Tips.tips(e.data,e.code),e.code&&ShareData.frameTop("",function(e){e.ui.f5()})}});break;case"edit":ShareData.frameTop("",function(e){e.ui.path.pathOperate.appEdit(a,"","root_edit")});break;case"del":$.dialog({id:"dialog_app_remove",icon:"question",padding:20,width:200,lock:!0,background:"#000",opacity:.3,content:LNG.remove_info,ok:function(){$.ajax({url:"./index.php?app/del&name="+urlEncode(a.name),dataType:"json",error:core.ajaxError,success:function(e){Tips.tips(e.data,e.code),e.code&&t()}})},cancel:!0});break;default:}}})},i=function(e){var a="",i="<button type='button' class='btn btn-sm btn-default dropdown-toggle' data-toggle='dropdown'>					<span class='caret'></span>					<span class='sr-only'></span>				</button>				<ul class='dropdown-menu' role='menu'>					<li><a action='edit' href='javascript:;'>"+LNG.button_edit+"</a></li>					<li><a action='del' href='javascript:;'>"+LNG.button_del+"</a></li>				</ul>";G.is_root||(i="");for(var t in e)if(e[t]){var n=e[t].icon;-1==n.search(G.static_path)&&"http"!=n.substring(0,4)&&(n=G.static_path+"images/file_icon/icon_app/"+n),a+="<li class='app_li' data-app="+base64Encode(jsonEncode(e[t]))+">				<a action='preview' href='javascript:;' class='icon'><img action='preview' src='"+n+"'></a>				<p><span class='title'>"+e[t].name+"</span>				<span class='info'>"+e[t].desc+"</span></p>"+"<div class='btn-group'>				<button type='button' class='btn btn-sm btn-default' action='add'>"+LNG.button_add+"</button>"+i+"</div><div style='clear:both;'></div></li>"}return a+="<div style='clear:both;'></div>"},t=function(a){(void 0==a||""==a)&&(a=e),$(".selected").removeClass("selected"),$("ul.setting a#"+a).addClass("selected"),$(".main").find(".h1").html("<i class='"+$(".selected i").attr("class")+"'></i>"+$(".selected").text());var t=$(".main .app-list");$.ajax({url:"./index.php?app/get&group="+a,dataType:"json",beforeSend:function(){},success:function(e){t.html(i(e.data)),$("body").scrollTop(0)}})};return{reload:t,init:a}});